<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the helper functions • arcpy</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the helper functions">
<meta property="og:description" content="arcpy">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">arcpy</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/helper-functions.html">Using the helper functions</a>
    </li>
    <li>
      <a href="../articles/manipulating-arcobjects.html">Manipulating arcobjects</a>
    </li>
    <li>
      <a href="../articles/quickstart.html">Quickstart to arcpy</a>
    </li>
    <li>
      <a href="../articles/raster-math.html">Raster math with arcpy</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mkoohafkan/arcpy/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the helper functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mkoohafkan/arcpy/blob/HEAD/vignettes/helper-functions.rmd" class="external-link"><code>vignettes/helper-functions.rmd</code></a></small>
      <div class="hidden name"><code>helper-functions.rmd</code></div>

    </div>

    
    
<p>The <code>arcpy</code> package provides a small number of helper
functions to make working with spatial layer geometries and attributes
easier. These helper functions are essentially wrappers for the arpcy
Data Access module that support simple transfer of information between
spatial layers and R data frames.</p>
<p>To demonstrate the helper functions, we’ll set up a workspace with a
copy of the California County Boundaries shapefile (available on <a href="https://data.ca.gov" class="external-link uri">https://data.ca.gov</a>). A copy
of this file is included with the <code>arcpy</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mkoohafkan/arcpy" class="external-link">arcpy</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set workspace</span></span>
<span><span class="va">arcpy</span><span class="op">$</span><span class="va">env</span><span class="op">$</span><span class="va">workspace</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arcpy</span><span class="op">$</span><span class="va">env</span><span class="op">$</span><span class="va">scratchWorkspace</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># copy feature for example</span></span>
<span><span class="va">fc</span> <span class="op">=</span> <span class="va">arcpy</span><span class="op">$</span><span class="va">management</span><span class="op">$</span><span class="fu">CopyFeatures</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"CA_Counties"</span>,</span>
<span>  <span class="st">"CA_Counties_TIGER2016.shp"</span>, package <span class="op">=</span> <span class="st">"arcpy"</span><span class="op">)</span>, <span class="st">"CA_Counties"</span><span class="op">)</span></span></code></pre></div>
<p>Reading attribute tables is accomplished using the function
<code>da_read</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FID"</span>, <span class="st">"NAME"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   FID          NAME</span></span>
<span><span class="co">## 1   0        Sierra</span></span>
<span><span class="co">## 2   1    Sacramento</span></span>
<span><span class="co">## 3   2 Santa Barbara</span></span>
<span><span class="co">## 4   3     Calaveras</span></span>
<span><span class="co">## 5   4       Ventura</span></span>
<span><span class="co">## 6   5   Los Angeles</span></span></code></pre>
<p>Tokens are also supported by <code>arcpy</code>. If you have the
<code>tibble</code> package installed, you can read geometry tokens as
list columns.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OID@"</span>, <span class="st">"NAME"</span>, <span class="st">"SHAPE@TRUECENTROID"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required namespace: tibble</span></span></code></pre>
<pre><code><span><span class="co">## # A tibble: 58 × 3</span></span>
<span><span class="co">##    `OID@` NAME          `SHAPE@TRUECENTROID`</span></span>
<span><span class="co">##     &lt;int&gt; &lt;chr&gt;         &lt;list&gt;              </span></span>
<span><span class="co">##  1      0 Sierra        &lt;list [2]&gt;          </span></span>
<span><span class="co">##  2      1 Sacramento    &lt;list [2]&gt;          </span></span>
<span><span class="co">##  3      2 Santa Barbara &lt;list [2]&gt;          </span></span>
<span><span class="co">##  4      3 Calaveras     &lt;list [2]&gt;          </span></span>
<span><span class="co">##  5      4 Ventura       &lt;list [2]&gt;          </span></span>
<span><span class="co">##  6      5 Los Angeles   &lt;list [2]&gt;          </span></span>
<span><span class="co">##  7      6 Sonoma        &lt;list [2]&gt;          </span></span>
<span><span class="co">##  8      7 Kings         &lt;list [2]&gt;          </span></span>
<span><span class="co">##  9      8 San Diego     &lt;list [2]&gt;          </span></span>
<span><span class="co">## 10      9 Placer        &lt;list [2]&gt;          </span></span>
<span><span class="co">## # ℹ 48 more rows</span></span></code></pre>
<p>You can use <code>da_update</code> to modify attributes.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span>, fields <span class="op">=</span> <span class="st">"NAME"</span><span class="op">)</span></span>
<span><span class="va">d</span><span class="op">[</span><span class="st">"NAME"</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">NAME</span>, <span class="st">"County, CA"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/da_update.html">da_update</a></span><span class="op">(</span><span class="va">fc</span>, <span class="va">d</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span>, fields <span class="op">=</span> <span class="st">"NAME"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                       NAME</span></span>
<span><span class="co">## 1        Sierra County, CA</span></span>
<span><span class="co">## 2    Sacramento County, CA</span></span>
<span><span class="co">## 3 Santa Barbara County, CA</span></span>
<span><span class="co">## 4     Calaveras County, CA</span></span>
<span><span class="co">## 5       Ventura County, CA</span></span>
<span><span class="co">## 6   Los Angeles County, CA</span></span></code></pre>
<p>You can also use <code>da_update</code> to add additional fields to a
table, provided you create the field first.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ALAND"</span>, <span class="st">"AWATER"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d</span><span class="op">[</span><span class="st">"FRACLAND"</span><span class="op">]</span> <span class="op">=</span> <span class="va">d</span><span class="op">$</span><span class="va">ALAND</span> <span class="op">/</span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">ALAND</span> <span class="op">+</span> <span class="va">d</span><span class="op">$</span><span class="va">AWATER</span><span class="op">)</span></span>
<span></span>
<span><span class="va">arcpy</span><span class="op">$</span><span class="va">management</span><span class="op">$</span><span class="fu">AddField</span><span class="op">(</span><span class="va">fc</span>, <span class="st">"FRACLAND"</span>, <span class="st">"FLOAT"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/da_update.html">da_update</a></span><span class="op">(</span><span class="va">fc</span>, <span class="va">d</span><span class="op">[</span><span class="st">"FRACLAND"</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>You can use <code>da_drop</code> and <code>da_insert</code> to remove
and add rows, respectively.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span><span class="op">)</span></span>
<span><span class="co"># extract second row</span></span>
<span><span class="va">new.d</span> <span class="op">=</span> <span class="va">d</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span></span>
<span><span class="co"># drop second row</span></span>
<span><span class="fu"><a href="../reference/da_drop.html">da_drop</a></span><span class="op">(</span><span class="va">fc</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># add the row back</span></span>
<span><span class="fu"><a href="../reference/da_insert.html">da_insert</a></span><span class="op">(</span><span class="va">fc</span>, <span class="va">new.d</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/da_read.html">da_read</a></span><span class="op">(</span><span class="va">fc</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 6 × 20</span></span>
<span><span class="co">##     FID Shape      STATEFP COUNTYFP COUNTYNS GEOID NAME   NAMELSAD LSAD  CLASSFP</span></span>
<span><span class="co">##   &lt;int&gt; &lt;list&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;  </span></span>
<span><span class="co">## 1     0 &lt;list [2]&gt; 06      091      00277310 06091 Sierr… Sierra … 06    H1     </span></span>
<span><span class="co">## 2     1 &lt;list [2]&gt; 06      083      00277306 06083 Santa… Santa B… 06    H1     </span></span>
<span><span class="co">## 3     2 &lt;list [2]&gt; 06      009      01675885 06009 Calav… Calaver… 06    H1     </span></span>
<span><span class="co">## 4     3 &lt;list [2]&gt; 06      111      00277320 06111 Ventu… Ventura… 06    H1     </span></span>
<span><span class="co">## 5     4 &lt;list [2]&gt; 06      037      00277283 06037 Los A… Los Ang… 06    H1     </span></span>
<span><span class="co">## 6     5 &lt;list [2]&gt; 06      097      01657246 06097 Sonom… Sonoma … 06    H1     </span></span>
<span><span class="co">## # ℹ 10 more variables: MTFCC &lt;chr&gt;, CSAFP &lt;chr&gt;, CBSAFP &lt;chr&gt;, METDIVFP &lt;chr&gt;,</span></span>
<span><span class="co">## #   FUNCSTAT &lt;chr&gt;, ALAND &lt;dbl&gt;, AWATER &lt;dbl&gt;, INTPTLAT &lt;chr&gt;, INTPTLON &lt;chr&gt;,</span></span>
<span><span class="co">## #   FRACLAND &lt;dbl&gt;</span></span></code></pre>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Koohafkan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
